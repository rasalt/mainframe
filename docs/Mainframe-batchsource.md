# Mainframe Source

Mainframe source is a plugin for reading legacy data generated by mainframes. 

## Description
To support reading mainframe source data, you have to import a COBOL copybook as a source definition to 
generate equivalent schema in the studio. The source is then configured to read binary COBOL data files
that actually contain data. The data layout iin the data files are either fixed-width or variable 
blocked files that may contain text and binary data. 

### COBOL Files
COBOL files are ASCII or EBCDIC fixed-width files that can contain text and/or binary data. 
You have COBOL copybook files, which describe the structure of the data, and COBOL data files, 
which contain the actual data. If your COBOL files come from a mainframe, they are in EBCDIC format. 
If your COBOL files come from a Windows machine, they are in ASCII format.

### Copybook
COBOL copybook, contains only the fields and datatypes used in the COBOL file. The plugin can directly 
import COBOL copybooks (.cpy files) as definitions for generating the target schema. Schema definition
is based on analyzing entire copybook including REDEFINES and OCCURS. Schema can be simple or complex.

### Type Mapping

| COBOL Type | PICTURE string | Example | Target Type |
|------------|----------------|---------|-------------|
| Alphabetic | A | PIC A(20) | String |
| AlphaNumeric | X (Combination of A,X, & 9) | PIC X(12) | String |
| Numeric | COMP-5 or BINARY | PIC S9 BINARY/PIC S999999 BINARY/PIC S9999999999 BINARY | Short/Integer/Long |
| Numeric | DISPLAY, COMP-3, PACKED-DECIMAL and ARITH(extend) | PIC S9(19) through S9(31) | byte[] |
| Numeric | DISPLAY, COMP-3, PACKED-DECIMAL and ARITH(extend) | S9(19) through S9(31), 9(19) through 9(31) | byte[] |
| DBCS | G, B, or N with DISPLAY-1 | PIC G(10) | String |
| National | PIC N(8) | | String |  


## Properties

### Copybook
Specifis the COBOL copybook that contains the structure of the data files. 

### Character Encoding
Specify the character encoding for the data to be processed. 

For IBM COBOL this will typically be some EBCDIC encoding, such as CP037 or IBM01140. 
For other environments, it's likely to be the more standard ASCII (UTF-8) encoding. 
See Character Encodings for more information.

### Copybook format
Specifies the format of the copybook source. If there are no sequence 
numbers, use the Free form option. If there are sequence numbers (mainly used in legacy mainframes), 
then use the Fixed format option. Fixed format includes sequence numbers, indicator area, area A, 
area B or free format.

### Record Descriptor Word (RDW)
This configuration specifies whether the data files contain variable-length logical records. If 
this configuration is set to 'true' then the data file is assumed to have RDW else it's fixed or fixed-blocked.

A variable-length logical record consists of a record descriptor word (RDW) followed by the data. 
The record descriptor word is a 4 byte field describing the record. The first 2 bytes contain the 
length (LL) of the logical record (including the 4 byte RDW). The length can be from 4 to 32‚ê†760. 
All bits of the third and fourth bytes must be 0, because other values are used for spanned records.

## Character Encodings 
The list of available character sets is determined by the Java Runtime Environment (JRE). Most of the time the 
JRE will have the character set you need. However, if you are using EBCDIC, the default character sets that come 
with the JRE do not include the EBCDIC character sets. There is no single character set for EBCDIC. Rather, 
there are EBCDIC character sets for different locales. For example, the English EBCDIC encoding is called IBM037 
or CP037. When referencing the links below that describe the character sets, the EBCDIC character sets generally 
included in those are identified as IBM, but there are many IBM character sets on the list that are not actually EBCDIC.

If your character set is not present, it's likely part of the extended characters sets that are not automatically 
installed into your Java Runtime Environment (JRE). These links list the supported character sets for JRE 5 or JRE 6. 
To install the extended character set, get the charsets.jar file, which is an option in the Java installation, 
and place it in the lib directory of your JRE. See your system administrator if you need help with this.

If the character set is not present in any of the lists, then it is invalid and needs to be changed to a value that 
is on the list.